(this["webpackJsonpprocess-management-client"]=this["webpackJsonpprocess-management-client"]||[]).push([[0],{272:function(e,t,a){},273:function(e,t,a){},274:function(e,t,a){},310:function(e,t){},499:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a(0),s=a.n(i),o=a(30),c=a.n(o),r=(a(272),a(273),a.p,a(189)),l=(a(274),a(41)),d=a(42),j=a(44),h=a(43),u=a(32),b=a(505),f=a(95),m=a(17),p=a(253),O=a(47),x=a(117),y=(a(279),a(509)),g=a(84),T=a(257),D=a(503),v=a(162),S=a(31),C=a(506),M=a(511),k=a(128),N=a(72),I=a(251),Y=a(516),w=a(517),z=a(194),q=a(501),F=a(504),L=a(54),R=a(515),E=a(510),A=a(502),P=a(190),V=a.n(P);V.a.interceptors.response.use((function(e){if("-1"===e.data.code)throw T.b.error(e.data.msg),new Error(e.data.msg);return e.data}),(function(e){return T.b.error("Error:"+e),Promise.reject(e)}));var K=V.a,B="",_={uploadUrl:"".concat(B,"/note/singleUpload"),queryNoteNoPage:function(e){return K({method:"get",url:"".concat(B,"/note/queryNoteNoPage"),params:e})},queryNoteLikeByPage:function(e){return K({method:"get",url:"".concat(B,"/note/queryNoteLikeByPage"),params:e})},addNote:function(e){return K({method:"post",url:"".concat(B,"/note/addNote"),data:e})},queryNoteById:function(e){return K({method:"get",url:"".concat(B,"/note/queryNoteById/").concat(e)})},updateNote:function(e){return K({method:"post",url:"".concat(B,"/note/updateNote"),data:e})},logicDeleteNote:function(e){return K({method:"delete",url:"".concat(B,"/note/logicDeleteNote/").concat(e)})},deleteLogicByNoteIds:function(e){return K({method:"delete",url:"".concat(B,"/note/deleteLogicByNoteIds"),data:e})},search:function(e,t){return K({method:"get",url:"".concat(B,"/note/search?keyWords=").concat(e)})},deleteNodeIndex:function(){return K({method:"get",url:"".concat(B,"/note/deleteNodeIndex")})},createNoteIndex:function(){return K({method:"get",url:"".concat(B,"/note/createNoteIndex")})},toggleNoteState:function(e){return K({method:"get",url:"".concat(B,"/note/toggleNoteState/").concat(e)})},finishTodo:function(e,t){return K({method:"post",url:"".concat(B,"/note/finishTodo"),data:{noteId:e,finishTime:t}})}},H=function(e){if(e){var t=function(e){return e<10?"0"+e:e},a=new Date(e),n=a.getFullYear(),i=a.getMonth()+1,s=a.getDate();a.getHours(),a.getMinutes(),a.getSeconds();return n+"-"+t(i)+"-"+t(s)}return""},U=a(240),W=a.n(U),Q=(a(312),a(313),function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={markdown:"aaaaa",id:"editor_".concat(Math.random())},e.handleChange=function(t){e.setState({markdown:t}),e.props.change(t)},e}return Object(d.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{children:Object(n.jsx)(W.a,{style:{zIndex:11},selectedTab:"preview",id:this.state.id,value:this.props.content,options:{spellChecker:!1,toolbar:["bold","italic","heading","|","quote","code","table","horizontal-rule","unordered-list","ordered-list","|","link","image","|","preview","side-by-side","fullscreen","|","guide"]},onChange:this.handleChange})})}}]),a}(s.a.Component)),J=a(186),G=a.n(J),X=a(241),Z=a.n(X),$=(a(410),s.a.Component,a(81)),ee=a.n($),te=a(507),ae=a(508),ne=a(258),ie=a(513),se=a(518),oe=a(519),ce=a(129),re=a(91),le=a(170),de=a(520),je=a(22),he=a.n(je),ue=te.a.Dragger,be=ae.a.TabPane,fe=ne.a.CheckableTag,me=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={formData:{classify:"Todo",content:"",todoLevel:3,todoStatus:0},inputSize:"normal",formStatus:"CREATE",colSpan:24},e.createInputMode=function(t,a){e.setState({formData:Object(m.a)(Object(m.a)({},e.state.formData),{},Object(O.a)({},a,t))})},e.createDateMode=function(t,a){e.setState({formData:Object(m.a)(Object(m.a)({},e.state.formData),{},Object(O.a)({},a,t))})},e.createInput=function(t){return Object(n.jsx)(y.a,{size:e.state.inputSize,value:e.state.formData[t],onChange:function(a){e.createInputMode(a.target.value,t)}})},e.selectTag=function(t){return function(){e.setState({formData:Object(m.a)(Object(m.a)({},e.state.formData),{},{classify:t})})}},e.saveNote=function(){var t=ee.a.cloneDeep(e.state.formData);t.startTimeTemp&&(t.startTime=t.startDateTemp+" "+t.startTimeTemp),t.finishTimeTemp&&(t.finishTime=t.finishDateTemp+" "+t.finishTimeTemp),"CREATE"===e.state.formStatus?_.addNote(t).then((function(t){e.props.closeFn(),e.props.cb&&e.props.cb(),T.b.info("SUCCESS")})).catch((function(e){})):_.updateNote(t).then((function(t){e.props.closeFn(),e.props.cb&&e.props.cb(),T.b.info("SUCCESS")})).catch((function(e){}))},e.mdChange=function(t){e.setState({formData:Object(m.a)(Object(m.a)({},e.state.formData),{},{content:t})})},e.setClassify=function(t){e.setState({formData:Object(m.a)(Object(m.a)({},e.state.formData),{},{classify:t.target.value})})},e.todoLevelChange=function(t,a){e.setState({formData:Object(m.a)(Object(m.a)({},e.state.formData),{},{todoLevel:t.key})})},e.setStartTimeCurrent=function(){var t=he()();e.setState({formData:Object(m.a)(Object(m.a)({},e.state.formData),{},{startDateTemp:t.format("YYYY-MM-DD"),startTimeTemp:t.format("HH:mm")})})},e.setFinishTimeCurrent=function(){var t=he()();e.setState({formData:Object(m.a)(Object(m.a)({},e.state.formData),{},{finishDateTemp:t.format("YYYY-MM-DD"),finishTimeTemp:t.format("HH:mm")})})},e.addExpireDate=function(){var t=e.state.formData.expireDate;t||(t=he()()),e.setState({formData:Object(m.a)(Object(m.a)({},e.state.formData),{},{expireDate:t.add(1,"days")})})},e.subExpireDate=function(){var t=e.state.formData.expireDate;t||(t=he()()),e.setState({formData:Object(m.a)(Object(m.a)({},e.state.formData),{},{expireDate:t.add(-1,"days")})})},e.pageInit=function(){if(e.props.noteId)e.setState({formStatus:"EDIT"}),_.queryNoteById(e.props.noteId).then((function(t){var a=t.result;a.startTime&&(a.startDateTemp=a.startTime.split(" ")[0],a.startTimeTemp=a.startTime.split(" ")[1]),a.finishTime&&(a.finishDateTemp=a.finishTime.split(" ")[0],a.finishTimeTemp=a.finishTime.split(" ")[1]),e.setState({formData:a})}));else{he()();var t=Object(m.a)(Object(m.a)({},e.state.formData),{},{expireDate:he()().add(2,"days"),alarmDays:1});e.setState({formData:t})}},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.pageInit()}},{key:"render",value:function(){var e=this,t=(this.state.formData.todoLevel,{name:"file",multiple:!0,action:_.uploadUrl,onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log(e.file,e.fileList),"done"===t?T.b.success("".concat(e.file.name," file uploaded successfully.")):"error"===t&&T.b.error("".concat(e.file.name," file upload failed."))}}),a=Object(n.jsx)(M.a,{count:5,value:this.state.formData.todoLevel,tooltips:["\u4e0d\u91cd\u8981","\u4e0d\u7d27\u6025","\u6b63\u5e38","\u91cd\u8981","\u7d27\u6025"],onChange:function(t){e.createInputMode(t,"todoLevel")}});return Object(n.jsx)("div",{children:Object(n.jsxs)(Y.a,{gutter:24,children:[Object(n.jsx)(w.a,{span:19,children:Object(n.jsxs)(Y.a,{gutter:24,children:[Object(n.jsx)(w.a,{span:"24",children:Object(n.jsx)("dl",{className:"form_col",children:Object(n.jsx)("dd",{children:Object(n.jsx)(y.a,{size:this.state.inputSize,value:this.state.formData.title,placeholder:"Title ...",onChange:function(t){e.createInputMode(t.target.value,"title")}})})})}),Object(n.jsx)(w.a,{span:"24",children:Object(n.jsxs)(ae.a,{defaultActiveKey:"1",tabBarExtraContent:a,children:[Object(n.jsx)(be,{tab:"Content",children:Object(n.jsx)(Q,{change:this.mdChange,content:this.state.formData.content})},"1"),Object(n.jsx)(be,{tab:"Attachment",children:Object(n.jsxs)(ue,Object(m.a)(Object(m.a)({},t),{},{children:[Object(n.jsx)("p",{className:"ant-upload-drag-icon",children:Object(n.jsx)(oe.a,{})}),Object(n.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),Object(n.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files"})]}))},"2")]})}),Object(n.jsx)(w.a,{span:"24",style:{display:"none"},children:Object(n.jsxs)("dl",{className:"form_col",children:[Object(n.jsx)("dt",{children:"PK"}),Object(n.jsx)("dd",{children:Object(n.jsx)(y.a,{size:this.state.inputSize,value:this.state.formData.noteId,onChange:function(t){e.createInputMode(t.target.value,"noteId")}})})]})})]})}),Object(n.jsx)(w.a,{span:5,children:Object(n.jsxs)(Y.a,{gutter:24,children:[Object(n.jsx)(w.a,{span:24,style:{marginBottom:8},children:Object(n.jsx)("dl",{className:"form_col",children:Object(n.jsx)("dd",{children:Object(n.jsxs)("div",{style:{background:"#fffbe6",borderRadius:5,padding:8},children:[Object(n.jsx)(fe,{onChange:this.selectTag("Todo"),checked:"Todo"===this.state.formData.classify,icon:Object(n.jsx)(x.a,{icon:"th-list",style:{fontSize:14,paddingTop:2,marginRight:8,color:"#ffffff"}}),children:"Todo"},"Todo"),Object(n.jsx)(fe,{onChange:this.selectTag("Note"),checked:"Note"===this.state.formData.classify,icon:Object(n.jsx)(x.a,{icon:"clipboard-list",style:{fontSize:14,paddingTop:2,marginRight:8,color:"#ffffff"}}),children:"Note"},"Note"),Object(n.jsx)(fe,{onChange:this.selectTag("Knowledge"),checked:"Knowledge"===this.state.formData.classify,icon:Object(n.jsx)(x.a,{icon:"book",style:{fontSize:14,paddingTop:2,marginRight:8,color:"#ffffff"}}),children:"Knowledge"},"Knowledge")]})})})}),Object(n.jsx)(w.a,{span:24,style:{marginBottom:8},children:"Todo"===this.state.formData.classify?Object(n.jsxs)("div",{children:[Object(n.jsx)(q.a,{}),Object(n.jsxs)(Y.a,{gutter:24,children:[Object(n.jsx)(w.a,{span:24,style:{marginBottom:8},children:Object(n.jsxs)("dl",{className:"form_col",children:[Object(n.jsx)("dt",{children:"Expire Date"}),Object(n.jsxs)("dd",{style:{display:"flex",alignItems:"center"},children:[Object(n.jsx)(ce.a,{style:{flex:"0 0 20",cursor:"pointer"},onClick:this.subExpireDate}),Object(n.jsx)(z.a,{style:{flex:"1 1 auto",marginLeft:8,marginRight:8},size:this.state.inputSize,onChange:function(t,a){e.createDateMode(a,"expireDate")},value:this.state.formData.expireDate?he()(this.state.formData.expireDate,"YYYY-MM-DD"):null}),Object(n.jsx)(re.a,{style:{flex:"0 0 20",cursor:"pointer"},onClick:this.addExpireDate})]})]})}),Object(n.jsx)(w.a,{span:24,style:{marginBottom:8},children:Object(n.jsxs)("dl",{className:"form_col",children:[Object(n.jsx)("dt",{children:"Alarm Days"}),Object(n.jsx)("dd",{children:Object(n.jsx)(ie.a,{style:{width:"100%"},size:this.state.inputSize,value:this.state.formData.alarmDays,onChange:function(t){e.createInputMode(t,"alarmDays")}})})]})}),Object(n.jsx)(w.a,{span:24,style:{marginBottom:8},children:Object(n.jsxs)("dl",{className:"form_col",children:[Object(n.jsxs)("dt",{children:["Start Time"," ",Object(n.jsx)(le.a,{onClick:this.setStartTimeCurrent,style:{color:"#2db7f5",cursor:"pointer"}})]}),Object(n.jsxs)("dd",{children:[Object(n.jsx)(z.a,{style:{width:"50%"},size:this.state.inputSize,onChange:function(t,a){e.createDateMode(a,"startDateTemp")},value:this.state.formData.startDateTemp?he()(this.state.formData.startDateTemp,"YYYY-MM-DD"):null}),Object(n.jsx)(A.a,{style:{width:"50%"},size:this.state.inputSize,format:"HH:mm",onChange:function(t,a){e.createDateMode(a,"startTimeTemp")},value:this.state.formData.startTimeTemp?he()(this.state.formData.startTimeTemp,"HH:mm"):null})]})]})}),Object(n.jsx)(w.a,{span:24,style:{marginBottom:8},children:Object(n.jsxs)("dl",{className:"form_col",children:[Object(n.jsxs)("dt",{children:["Finish Time"," ",Object(n.jsx)(le.a,{onClick:this.setFinishTimeCurrent,style:{color:"#2db7f5",cursor:"pointer"}})]}),Object(n.jsxs)("dd",{children:[Object(n.jsx)(z.a,{style:{width:"50%"},size:this.state.inputSize,onChange:function(t,a){e.createDateMode(a,"finishDateTemp")},value:this.state.formData.finishDateTemp?he()(this.state.formData.finishDateTemp,"YYYY-MM-DD"):null}),Object(n.jsx)(A.a,{style:{width:"50%"},format:"HH:mm",size:this.state.inputSize,onChange:function(t,a){e.createDateMode(a,"finishTimeTemp")},value:this.state.formData.finishTimeTemp?he()(this.state.formData.finishTimeTemp,"HH:mm"):null})]})]})}),Object(n.jsx)(w.a,{span:24,style:{marginBottom:8},children:Object(n.jsxs)("dl",{className:"form_row",children:[Object(n.jsx)("dt",{children:"Status"}),Object(n.jsx)("dd",{children:Object(n.jsx)(se.a,{checked:1===this.state.formData.todoStatus,onChange:function(t){e.createInputMode(t?1:0,"todoStatus")},checkedChildren:"\u5df2\u5b8c\u6210",unCheckedChildren:"\u672a\u5b8c\u6210"})})]})})]})]}):null}),Object(n.jsx)(w.a,{span:24,style:{marginBottom:8},children:Object(n.jsx)("div",{children:Object(n.jsx)(S.a,{block:!0,type:"primary",icon:Object(n.jsx)(de.a,{}),onClick:this.saveNote,children:"Save"})})})]})})]})})}}]),a}(s.a.Component);me.defaultProps={noteId:"",canEdit:!0,closeFn:function(){}};var pe=me,Oe=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={data:{},colSpan:{xs:24,sm:12,md:8,lg:6,xl:4,xxl:3}},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.noteId&&_.queryNoteById(this.props.noteId).then((function(t){var a=t.result;a.userBirthday&&(a.userBirthday=H(a.userBirthday)),e.setState({data:t.result})}))}},{key:"render",value:function(){return Object(n.jsx)("div",{children:Object(n.jsxs)(Y.a,{gutter:24,children:[Object(n.jsx)(w.a,Object(m.a)(Object(m.a)({},this.state.colSpan),{},{children:Object(n.jsxs)("dl",{className:"form_col",children:[Object(n.jsx)("dt",{children:"PK"}),Object(n.jsx)("dd",{children:this.state.data.noteId})]})})),Object(n.jsx)(w.a,Object(m.a)(Object(m.a)({},this.state.colSpan),{},{children:Object(n.jsxs)("dl",{className:"form_col",children:[Object(n.jsx)("dt",{children:"classify"}),Object(n.jsx)("dd",{children:this.state.data.classify})]})})),Object(n.jsx)(w.a,Object(m.a)(Object(m.a)({},this.state.colSpan),{},{children:Object(n.jsxs)("dl",{className:"form_col",children:[Object(n.jsx)("dt",{children:"title"}),Object(n.jsx)("dd",{children:this.state.data.title})]})})),Object(n.jsx)(w.a,Object(m.a)(Object(m.a)({},this.state.colSpan),{},{children:Object(n.jsxs)("dl",{className:"form_col",children:[Object(n.jsx)("dt",{children:"content"}),Object(n.jsx)("dd",{children:this.state.data.content})]})})),Object(n.jsx)(w.a,Object(m.a)(Object(m.a)({},this.state.colSpan),{},{children:Object(n.jsxs)("dl",{className:"form_col",children:[Object(n.jsx)("dt",{children:"expireDate"}),Object(n.jsx)("dd",{children:H(this.state.data.expireDate)})]})})),Object(n.jsx)(w.a,Object(m.a)(Object(m.a)({},this.state.colSpan),{},{children:Object(n.jsxs)("dl",{className:"form_col",children:[Object(n.jsx)("dt",{children:"alarmDays"}),Object(n.jsx)("dd",{children:this.state.data.alarmDays})]})}))]})})}}]),a}(s.a.Component);Oe.defaultProps={noteId:""};var xe=Oe,ye=a(259),ge=a(523),Te=a(167),De=a(46),ve=a(524),Se=a(522),Ce=a(169),Me=a(525),ke=a(526),Ne=a(171),Ie=a(45),Ye=a(261),we=a(113),ze=a(260),qe=a(512),Fe=a(242),Le=a(514),Re=a(521),Ee=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e,i;Object(l.a)(this,a);for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];return(i=t.call.apply(t,[this].concat(o))).state=(e={spinning:!1,data:[],value:he()(),selectedValue:he()()},Object(O.a)(e,"selectedValue",he()()),Object(O.a)(e,"queryCondition",{}),e),i.headerRender=function(e){var t=e.value;return(0,e.onChange)(t),Object(n.jsx)(z.a,{onChange:i.onMonthChange,picker:"month"})},i.onMonthChange=function(e){i.setState({value:e,selectedValue:e})},i.setQueryCondition=function(e){var t=ee.a.cloneDeep(e);delete t.startTimeFrom,delete t.startTimeTo,delete t.finishTimeFrom,delete t.finishTimeTo,i.setState({queryCondition:t},i.queryData)},i.queryData=function(){i.setState({spinning:!0});var e=ee.a.cloneDeep(i.state.queryCondition),t=he()(i.state.value.format("YYYY-MM-DD"),"YYYY-MM-DD");e.expireDateFrom=t.format("YYYY-MM")+"-01 00:00:00";var a=t.add(1,"months");e.expireDateTo=a.format("YYYY-MM")+"-01 00:00:00",_.queryNoteLikeByPage(e).then((function(e){i.setState({data:e.result.list,spinning:!1})})).catch((function(e){T.b.error("error! "+e),i.setState({spinning:!1})}))},i.onSelect=function(e){i.setState({value:e,selectedValue:e})},i.onPanelChange=function(e,t){console.log(e.format("YYYY-MM-DD")),console.log(t),i.setState({value:e},i.queryData)},i.getListData=function(e){var t=e.format("YYYY-MM-DD");return i.state.data.filter((function(e){return t===e.expireDate}))||[]},i.dateCellRender=function(e){var t=i.getListData(e);return Object(n.jsx)("ul",{className:"events",style:{listStyleType:"none",paddingLeft:4},children:t.map((function(e){return Object(n.jsx)("li",{onClick:function(){i.props.cb(e.noteId)},children:Object(n.jsx)(qe.a,{color:i.computColor(e),text:i.computContent(e)})},e.title)}))})},i.computColor=function(e){return["#999","lime","blue","orange","volcano"][e.todoLevel-1]},i.computContent=function(e){var t=Object(n.jsx)(Re.a,{style:{fontSize:12,marginRight:4}});"Todo"===e.classify&&(t=Object(n.jsx)(Ne.a,{style:{fontSize:12,marginRight:4}}));var a=Object(n.jsx)(Te.a,{style:{fontSize:12,marginLeft:4,color:"green"}});0===e.todoStatus&&(a=Object(n.jsx)(Se.a,{style:{fontSize:12,marginLeft:4,color:"red"}}));var i=Object(n.jsxs)("span",{children:["[",e.classify,"]  ",1===e.todoStatus?"\u5df2\u5b8c\u6210":"\u672a\u5b8c\u6210",Object(n.jsx)("br",{}),Object(n.jsx)(M.a,{style:{fontSize:12},disabled:!0,defaultValue:e.todoLevel})]});return Object(n.jsx)("span",{children:Object(n.jsxs)(L.a,{title:i,color:"#108ee9",children:[t,e.title,a]},e.noteId)})},i}return Object(d.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{children:Object(n.jsxs)(Fe.a,{tip:"Loading...",spinning:this.state.spinning,children:[this.state.value.format("YYYY-MM-DD"),Object(n.jsx)(Le.a,{dateCellRender:this.dateCellRender,monthCellRender:function(e){var t=function(e){if(8===e.month())return 1394}(e);return t?Object(n.jsxs)("div",{className:"notes-month",children:[Object(n.jsx)("section",{children:t}),Object(n.jsx)("span",{children:"Backlog number"})]}):null},value:this.state.value,mode:"month",onPanelChange:this.onPanelChange,onSelect:this.onSelect})]})})}}]),a}(s.a.Component),Ae=y.a.Search,Pe=g.a.Option,Ve=[{key:5,value:"\u7d27\u6025",color:"#f50"},{key:4,value:"\u91cd\u8981",color:"#108ee9"},{key:3,value:"\u6b63\u5e38",color:"#87d068"},{key:2,value:"\u4e0d\u7d27\u6025",color:"#2db7f5"},{key:1,value:"\u4e0d\u91cd\u8981",color:"#2db7f5"}],Ke=function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e,i;Object(l.a)(this,a);for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(i=t.call.apply(t,[this].concat(c))).state=(e={calendarQueryCondition:{},noteId:"",finishDateTemp:he()(),finishTimeTemp:he()(),finishTimeModalVisible:!1,advanceSearchVisible:!1,colSpan:24,viewType:"CALENDAR",queryCondition:{noteId:"",todoStatus:0},tabLoading:!1,tabPagination:{current:1,pageSize:10,size:"small",total:0,pageSizeOptions:[5,10,15,50,100],showTotal:function(e,t){return"".concat(e," items")},showSizeChanger:!0,showQuickJumper:!0},tabSort:{field:"createTime",order:"desc"},tabData:[],selectedRowKeys:[]},Object(O.a)(e,"noteId",""),Object(O.a)(e,"formModalVisible",!1),Object(O.a)(e,"viewModalVisible",!1),e),i.calendarComponent=s.a.createRef(),i.onSelectChange=function(e){i.setState({selectedRowKeys:e})},i.clearSelectedKeys=function(){i.setState({selectedRowKeys:[]})},i.checkedInit=function(e){return void 0!==i.state.selectedRowKeys.find((function(t){return t===e}))},i.checkboxChange=function(e){if(e.target.checked){void 0===i.state.selectedRowKeys.find((function(t){return t===e.target.value}))&&i.setState({selectedRowKeys:[].concat(Object(p.a)(i.state.selectedRowKeys),[e.target.value])})}else{var t=i.state.selectedRowKeys.filter((function(t){return t!==e.target.value}));i.setState({selectedRowKeys:t})}},i.tabChange=function(e,t,a){var n=Object(m.a)(Object(m.a)({},i.state.tabPagination),{},{current:e.current,pageSize:e.pageSize}),s={};s=a&&a.order?{field:a.field,order:a.order.replace("end","")}:i.state.tabSort,i.setState({tabPagination:n,tabSort:s},i.queryTabData)},i.tabPaginationChange=function(e,t){var a=Object(m.a)(Object(m.a)({},i.state.tabPagination),{},{current:e,pageSize:t});i.setState({tabPagination:a},i.queryTabData)},i.calendarSearch=function(){var e=ee.a.cloneDeep(i.state.queryCondition);e.startTimeFrom&&(e.startTimeFrom=e.startTimeFrom+" 00:00:00"),e.startTimeTo&&(e.startTimeTo=e.startTimeTo+" 23:59:59"),e.finishTimeFrom&&(e.finishTimeFrom=e.finishTimeFrom+" 00:00:00"),e.finishTimeTo&&(e.finishTimeTo=e.finishTimeTo+" 23:59:59")},i.queryTabData=function(e){i.setState({tabLoading:!0});var t=i.state.tabPagination.current;e?(t=1,i.setState({tabPagination:Object(m.a)(Object(m.a)({},i.state.tabPagination),{},{current:1})})):t=i.state.tabPagination.current;var a=ee.a.cloneDeep(i.state.queryCondition);a.startTimeFrom&&(a.startTimeFrom=a.startTimeFrom+" 00:00:00"),a.startTimeTo&&(a.startTimeTo=a.startTimeTo+" 23:59:59"),a.finishTimeFrom&&(a.finishTimeFrom=a.finishTimeFrom+" 00:00:00"),a.finishTimeTo&&(a.finishTimeTo=a.finishTimeTo+" 23:59:59"),console.log("----",a),i.calendarComponent.current&&i.calendarComponent.current.setQueryCondition(a),a.pageNum=t,a.pageSize=i.state.tabPagination.pageSize,_.queryNoteLikeByPage(a).then((function(e){i.setState({tabLoading:!1,tabData:e.result.list,tabPagination:Object(m.a)(Object(m.a)({},i.state.tabPagination),{},{total:e.result.total})})})).catch((function(e){T.b.error("error! "+e),i.setState({tabLoading:!1})}))},i.createOperate=function(e){var t=Object(n.jsxs)(f.a,{children:[Object(n.jsx)(f.a.Item,{icon:Object(n.jsx)(ye.a,{}),children:Object(n.jsx)(D.a,{placement:"topLeft",title:"Are you confirm delete this record",onConfirm:function(){i.logicDeleteNote(e.noteId)},okText:"Yes",cancelText:"No",children:"Delete"})},"1"),Object(n.jsx)(f.a.Item,{onClick:function(){i.openNoteViewModal(e.noteId)},icon:Object(n.jsx)(ge.a,{}),children:"Data View"},"2"),"Todo"===e.classify?0===e.todoStatus?Object(n.jsx)(f.a.Item,{onClick:function(){i.openFinishTimeModal(e.noteId,e.finishTime)},icon:Object(n.jsx)(Te.a,{}),children:"Finish"},"3"):Object(n.jsx)(f.a.Item,{onClick:function(){i.toggleNoteState(e.noteId)},icon:Object(n.jsx)(De.a,{}),children:"Unfinish"},"4"):null]});return Object(n.jsxs)("div",{children:[Object(n.jsx)("a",{className:"ant-dropdown-link",onClick:function(){i.openNoteFormModal(e.noteId)},children:"Edit"}),Object(n.jsx)(v.a,{overlay:t,children:Object(n.jsx)(S.a,{type:"link",children:Object(n.jsx)(ve.a,{})})})]})},i.onSearch=function(e){i.setState({queryCondition:Object(m.a)(Object(m.a)({},i.state.queryCondition),{},{keyWords:e})},(function(){i.queryTabData(!0)}))},i.resetSearch=function(){i.setState({queryCondition:{}},(function(){i.queryTabData(!0)}))},i.keyWordsChange=function(e){i.setState({queryCondition:Object(m.a)(Object(m.a)({},i.state.queryCondition),{},{keyWords:e.target.value})})},i.clearKeyWords=function(){i.setState({queryCondition:{keyWords:""}},(function(){i.queryTabData(!0)}))},i.logicDeleteNote=function(e){_.logicDeleteNote(e).then((function(e){T.b.info("SUCCESS"),i.queryTabData()})).catch((function(e){T.b.info("FAILURE")}))},i.deleteLogicByNoteIds=function(){i.state.selectedRowKeys.length>0?_.deleteLogicByNoteIds(i.state.selectedRowKeys).then((function(e){T.b.info("SUCCESS"),i.setState({selectedRowKeys:[]}),i.queryTabData()})).catch((function(e){T.b.error("FAILURE")})):T.b.error("Please Select A Item At Least")},i.closeNoteFormModal=function(){i.setState({formModalVisible:!1,noteId:""})},i.closeNoteViewModal=function(){i.setState({viewModalVisible:!1,noteId:""})},i.openNoteFormModal=function(e){e?i.setState({noteId:e,formModalVisible:!0}):i.setState({formModalVisible:!0})},i.openNoteViewModal=function(e){i.setState({noteId:e,viewModalVisible:!0})},i.toggleViewType=function(e){i.setState({viewType:e})},i.handleAdvanceSearchVisibleChange=function(e){i.setState({advanceSearchVisible:e})},i.createMode=function(e,t,a){a?i.setState({queryCondition:Object(m.a)(Object(m.a)({},i.state.queryCondition),{},Object(O.a)({},t,e))},i.queryTabData):i.setState({queryCondition:Object(m.a)(Object(m.a)({},i.state.queryCondition),{},Object(O.a)({},t,e))})},i.search=function(){_.search(i.state.queryCondition.keyWords,null).then((function(e){i.setState({tabData:e.result})}))},i.deleteIndex=function(){_.deleteNodeIndex().then((function(e){e.result?T.b.success("success! "):T.b.error(e.msg)}))},i.createIndex=function(){_.createNoteIndex().then((function(e){e.result?T.b.success("success! "):T.b.error(e.msg)}))},i.computColor=function(e){if("Todo"===e.classify){if(0!==e.todoStatus)return"block gray_block";if(5===e.todoLevel)return"block red_block";if(4===e.todoLevel)return"block yellow_block";if(3===e.todoLevel)return"block green_block"}return"block"},i.toggleNoteState=function(e){_.toggleNoteState(e).then((function(e){console.log(e),"-1"!==e.code?(T.b.success("SUCCESS"),i.queryTabData()):T.b.error(e.msg)}),(function(e){T.b.error(e.msg)}))},i.setFinishTimeCurrent=function(){var e=he()();i.setState({finishDateTemp:e,finishTimeTemp:e})},i.finishTodo=function(){var e=i.state.finishDateTemp.format("YYYY-MM-DD")+" "+i.state.finishTimeTemp.format("HH:mm");_.finishTodo(i.state.noteId,e).then((function(e){console.log(e),T.b.success("SUCCESS"),i.closeFinishTimeModal(),i.queryTabData()}))},i.closeFinishTimeModal=function(){i.setState({finishTimeModalVisible:!1,noteId:""})},i.openFinishTimeModal=function(e,t){t&&i.setState({finishDateTemp:he()(t,"YYYY-MM-DD HH:mm"),finishTimeTemp:he()(t,"YYYY-MM-DD HH:mm")}),i.setState({noteId:e,finishTimeModalVisible:!0})},i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.queryTabData()}},{key:"render",value:function(){var e=this,t={};Ve.forEach((function(e){t[e.key]=e}));var a=[{title:"classify",dataIndex:"classify",key:"classify",sorter:!0},{title:"title",width:500,dataIndex:"title",key:"title",sorter:!0},{title:"expireDate",dataIndex:"expireDate",key:"expireDate",sorter:!0,render:function(e,t,a){return H(e)}},{title:"alarmDays",dataIndex:"alarmDays",key:"alarmDays",sorter:!0},{title:"Operate",key:"operate",render:function(t,a,n){return e.createOperate(a)}}],i={selectedRowKeys:this.state.selectedRowKeys,preserveSelectedRowKeys:!0,onChange:this.onSelectChange,selections:[{key:"clearAll",text:"Clear All",onSelect:function(t){e.setState({selectedRowKeys:[]})}}]},s=Object(n.jsx)("div",{style:{display:"DETAIL"===this.state.viewType?"block":"none",background:"#ecf0f5",borderRadius:3,padding:8},children:Object(n.jsx)("div",{className:"block",children:Object(n.jsx)(C.a,{rowSelection:i,loading:this.state.tabLoading,rowKey:function(e){return e.noteId},size:"small",columns:a,dataSource:this.state.tabData,pagination:this.state.tabPagination,onChange:this.tabChange})})}),o=Object(n.jsx)("div",{style:{display:"CALENDAR"===this.state.viewType?"block":"none"},children:Object(n.jsx)(Ee,{ref:this.calendarComponent,cb:this.openNoteFormModal,queryCondition:this.state.queryCondition})}),c=Object(n.jsxs)("div",{style:{display:"LIST"===this.state.viewType?"block":"none"},children:[Object(n.jsx)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-start",background:"#ecf0f5",borderRadius:3,padding:8},children:this.state.tabData.length>0?this.state.tabData.map((function(t){return Object(n.jsx)("div",{style:{flex:"0 0 20%",padding:"0px 8px 8px 0px"},children:Object(n.jsxs)("div",{className:e.computColor(t),children:[Object(n.jsx)("div",{className:"title",children:t.title}),Object(n.jsxs)("div",{style:{height:126},children:[Object(n.jsxs)("dl",{className:"profile",children:[Object(n.jsx)("dt",{children:"classify"}),Object(n.jsx)("dd",{children:t.classify})]}),Object(n.jsxs)("dl",{className:"profile",children:[Object(n.jsx)("dt",{children:"Level"}),Object(n.jsx)("dd",{children:Object(n.jsx)(M.a,{disabled:!0,defaultValue:t.todoLevel,style:{fontSize:14}})})]}),"Todo"===t.classify?Object(n.jsxs)("div",{children:[Object(n.jsxs)("dl",{className:"profile",children:[Object(n.jsx)("dt",{children:"Status"}),Object(n.jsxs)("dd",{children:[1===t.todoStatus?Object(n.jsx)(Te.a,{}):Object(n.jsx)(Se.a,{style:{fontSize:14,color:"red"}})," "]})]}),Object(n.jsxs)("dl",{className:"profile",children:[Object(n.jsx)("dt",{children:"expireDate"}),Object(n.jsx)("dd",{children:H(t.expireDate)})]}),Object(n.jsxs)("dl",{className:"profile",children:[Object(n.jsx)("dt",{children:"alarmDays"}),Object(n.jsx)("dd",{children:t.alarmDays})]})]}):null]}),Object(n.jsx)("div",{className:"divider"}),Object(n.jsxs)("div",{style:{display:"flex"},children:[Object(n.jsx)("div",{style:{flex:"1 1 auto",paddingTop:4},children:Object(n.jsx)(k.a,{checked:e.checkedInit(t.noteId),value:t.noteId,onChange:e.checkboxChange})}),Object(n.jsx)("div",{style:{flex:"0 0 75px"},children:e.createOperate(t)})]})]})},t.noteId)})):Object(n.jsx)("div",{style:{padding:8,textAlign:"center",background:"#fff",width:"100%"},children:Object(n.jsx)(N.a,{image:N.a.PRESENTED_IMAGE_SIMPLE})})}),Object(n.jsx)("div",{style:{textAlign:"right"},children:Object(n.jsx)(I.a,Object(m.a)(Object(m.a)({style:{marginTop:8}},this.state.tabPagination),{},{onChange:this.tabPaginationChange}))})]}),r=Object(n.jsxs)("div",{style:{width:300},children:[Object(n.jsxs)(Y.a,{gutter:24,children:[Object(n.jsx)(w.a,{span:24,children:Object(n.jsxs)("dl",{className:"form_col",children:[Object(n.jsx)("dt",{children:"ID"}),Object(n.jsx)("dd",{children:Object(n.jsx)(y.a,{size:this.state.inputSize,value:this.state.queryCondition.noteId,onChange:function(t){e.createMode(t.target.value,"noteId")}})})]})}),Object(n.jsx)(w.a,{span:24,children:Object(n.jsxs)("dl",{className:"form_col",children:[Object(n.jsx)("dt",{children:"classify"}),Object(n.jsx)("dd",{children:Object(n.jsx)(y.a,{size:this.state.inputSize,value:this.state.queryCondition.classify,onChange:function(t){e.createMode(t.target.value,"classify")}})})]})}),Object(n.jsx)(w.a,{span:24,children:Object(n.jsxs)("dl",{className:"form_col",children:[Object(n.jsx)("dt",{children:"title"}),Object(n.jsx)("dd",{children:Object(n.jsx)(y.a,{size:this.state.inputSize,value:this.state.queryCondition.title,onChange:function(t){e.createMode(t.target.value,"title")}})})]})}),Object(n.jsx)(w.a,{span:24,children:Object(n.jsxs)("dl",{className:"form_col",children:[Object(n.jsx)("dt",{children:"content"}),Object(n.jsx)("dd",{children:Object(n.jsx)(y.a,{size:this.state.inputSize,value:this.state.queryCondition.content,onChange:function(t){e.createMode(t.target.value,"content")}})})]})}),Object(n.jsx)(w.a,{span:24,children:Object(n.jsxs)("dl",{className:"form_col",children:[Object(n.jsx)("dt",{children:"expireDate"}),Object(n.jsxs)("dd",{children:[Object(n.jsx)(z.a,{size:this.state.inputSize,onChange:function(t,a){e.createMode(a,"expireDateFrom")},value:this.state.queryCondition.expireDateFrom?he()(this.state.queryCondition.expireDateFrom,"YYYY-MM-DD"):null}),Object(n.jsx)(z.a,{size:this.state.inputSize,onChange:function(t,a){e.createMode(a,"expireDateTo")},value:this.state.queryCondition.expireDateTo?he()(this.state.queryCondition.expireDateTo,"YYYY-MM-DD"):null})]})]})}),Object(n.jsx)(w.a,{span:24,children:Object(n.jsxs)("dl",{className:"form_col",children:[Object(n.jsx)("dt",{children:"Start Date"}),Object(n.jsxs)("dd",{children:[Object(n.jsx)(z.a,{size:this.state.inputSize,onChange:function(t,a){e.createMode(a,"startTimeFrom")},value:this.state.queryCondition.startTimeFrom?he()(this.state.queryCondition.startTimeFrom,"YYYY-MM-DD"):null}),Object(n.jsx)(z.a,{size:this.state.inputSize,onChange:function(t,a){e.createMode(a,"startTimeTo")},value:this.state.queryCondition.startTimeTo?he()(this.state.queryCondition.startTimeTo,"YYYY-MM-DD"):null})]})]})}),Object(n.jsx)(w.a,{span:24,children:Object(n.jsxs)("dl",{className:"form_col",children:[Object(n.jsx)("dt",{children:"Finish Date"}),Object(n.jsxs)("dd",{children:[Object(n.jsx)(z.a,{size:this.state.inputSize,onChange:function(t,a){e.createMode(a,"finishTimeFrom")},value:this.state.queryCondition.finishTimeFrom?he()(this.state.queryCondition.finishTimeFrom,"YYYY-MM-DD"):null}),Object(n.jsx)(z.a,{size:this.state.inputSize,onChange:function(t,a){e.createMode(a,"finishTimeTo")},value:this.state.queryCondition.finishTimeTo?he()(this.state.queryCondition.finishTimeTo,"YYYY-MM-DD"):null})]})]})})]}),Object(n.jsx)(q.a,{style:{margin:"8px 0px"}}),Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsx)(S.a,{style:{marginRight:8},onClick:function(){e.queryTabData(!0)},icon:Object(n.jsx)(Ce.a,{}),children:"Search"}),Object(n.jsx)(S.a,{onClick:this.resetSearch,children:"Reset"})]})]}),l=Object(n.jsxs)(g.a,{allowClear:!0,style:{width:90,marginRight:4},placeholder:"Status",value:this.state.queryCondition.todoStatus,onChange:function(t){e.createMode(t,"todoStatus",!0)},children:[Object(n.jsx)(Pe,{value:0,children:"\u672a\u5b8c\u6210"}),Object(n.jsx)(Pe,{value:1,children:"\u5df2\u5b8c\u6210"})]});return Object(n.jsxs)("div",{children:[Object(n.jsxs)(Y.a,{gutter:24,children:[Object(n.jsxs)(w.a,{span:12,children:["LIST"===this.state.viewType?Object(n.jsx)(Me.a,{style:{fontSize:16,color:"#1890ff"}}):Object(n.jsx)(Me.a,{style:{fontSize:14,cursor:"pointer"},onClick:function(){e.toggleViewType("LIST")}}),Object(n.jsx)(q.a,{type:"vertical"}),"DETAIL"===this.state.viewType?Object(n.jsx)(ke.a,{style:{fontSize:16,color:"#1890ff"}}):Object(n.jsx)(ke.a,{style:{fontSize:14,cursor:"pointer"},onClick:function(){e.toggleViewType("DETAIL")}}),Object(n.jsx)(q.a,{type:"vertical"}),"CALENDAR"===this.state.viewType?Object(n.jsx)(Ne.a,{style:{fontSize:16,color:"#1890ff"}}):Object(n.jsx)(Ne.a,{style:{fontSize:14,cursor:"pointer"},onClick:function(){e.toggleViewType("CALENDAR")}})]}),Object(n.jsx)(w.a,{span:12,children:Object(n.jsxs)("div",{className:"tabTool",children:[Object(n.jsx)(Ae,{addonBefore:l,placeholder:"Key Word",style:{width:300,marginRight:8},onSearch:this.onSearch,onChange:this.keyWordsChange,suffix:Object(n.jsx)(Ie.a,{onClick:this.clearKeyWords,style:{cursor:"pointer",fontSize:12,color:"#aaa"}}),value:this.state.queryCondition.keyWords,enterButton:!0}),Object(n.jsx)(F.a,{content:r,trigger:"click",title:"Advance Search",visible:this.state.advanceSearchVisible,onVisibleChange:this.handleAdvanceSearchVisibleChange,children:Object(n.jsx)(S.a,{type:"link",icon:this.state.advanceSearchVisible?Object(n.jsx)(Ye.a,{}):Object(n.jsx)(we.a,{}),children:"Advance"})}),Object(n.jsx)(L.a,{title:"Create",children:Object(n.jsx)(S.a,{type:"primary",icon:Object(n.jsx)(ze.a,{}),onClick:function(){e.openNoteFormModal()}})})]})})]}),this.state.selectedRowKeys&&this.state.selectedRowKeys.length>0?Object(n.jsx)(R.a,{type:"info",message:Object(n.jsxs)("div",{style:{display:"flex"},children:[Object(n.jsxs)("div",{style:{flex:"1 1 auto"},children:["Selected ",this.state.selectedRowKeys.length," items"," ",Object(n.jsx)(L.a,{title:"Clear Selected",children:Object(n.jsx)(x.a,{icon:"times",style:{fontSize:14,paddingTop:2,marginRight:8,color:"#999999",cursor:"pointer"},onClick:this.clearSelectedKeys})})]}),Object(n.jsx)("div",{style:{flex:"0 0 50"},children:Object(n.jsx)(L.a,{title:"Delete Selected",children:Object(n.jsx)(D.a,{placement:"topLeft",title:"Are you confirm delete this record",onConfirm:this.deleteLogicByNoteIds,okText:"Yes",cancelText:"No",children:Object(n.jsx)(S.a,{size:"small",icon:Object(n.jsx)(ye.a,{})})})})})]})}):null,c,s,o,Object(n.jsx)(E.a,{title:"Note Information",visible:this.state.formModalVisible,footer:null,width:"95%",style:{top:24},destroyOnClose:!0,onCancel:this.closeNoteFormModal,maskClosable:!1,children:Object(n.jsx)(pe,{noteId:this.state.noteId,canEdit:!0,closeFn:this.closeNoteFormModal,cb:this.queryTabData})}),Object(n.jsx)(E.a,{title:"Edit Note",visible:this.state.viewModalVisible,width:"80%",destroyOnClose:!0,onCancel:this.closeNoteViewModal,maskClosable:!1,children:Object(n.jsx)(xe,{noteId:this.state.noteId,canEdit:!0,closeFn:this.closeNoteViewModal})}),Object(n.jsx)(E.a,{title:"Finish Time",visible:this.state.finishTimeModalVisible,destroyOnClose:!0,onCancel:this.closeFinishTimeModal,onOk:this.finishTodo,maskClosable:!1,children:Object(n.jsxs)("dl",{className:"form_col",children:[Object(n.jsxs)("dt",{children:["Finish Time"," ",Object(n.jsx)(le.a,{onClick:this.setFinishTimeCurrent,style:{color:"#2db7f5",cursor:"pointer"}})]}),Object(n.jsxs)("dd",{children:[Object(n.jsx)(z.a,{style:{width:"50%"},size:this.state.inputSize,onChange:function(t,a){e.setState({finishDateTemp:t})},value:this.state.finishDateTemp}),Object(n.jsx)(A.a,{style:{width:"50%"},format:"HH:mm",size:this.state.inputSize,onChange:function(t,a){e.setState({finishTimeTemp:t})},value:this.state.finishTimeTemp})]})]})})]})}}]),a}(s.a.Component),Be=(b.a.Header,b.a.Content),_e=b.a.Footer,He=(b.a.Sider,f.a.SubMenu,function(e){Object(j.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={collapsed:!1},e.onCollapse=function(t){e.setState({collapsed:t})},e}return Object(d.a)(a,[{key:"render",value:function(){this.state.collapsed;return Object(n.jsx)(b.a,{style:{minHeight:"100vh"},children:Object(n.jsxs)(b.a,{className:"site-layout",children:[Object(n.jsx)(Be,{style:{margin:"8px 8px 0px"},children:Object(n.jsx)("div",{className:"site-layout-background",style:{padding:"8px 8px",minHeight:360,background:"#fff"},children:Object(n.jsx)(u.a,{path:"/",exact:!0,component:Ke})})}),Object(n.jsx)(_e,{style:{textAlign:"center"},children:"Code Generator Example"})]})})}}]),a}(s.a.Component));var Ue=function(){return Object(n.jsx)(r.a,{children:Object(n.jsx)(He,{})})},We=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,527)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,s=t.getLCP,o=t.getTTFB;a(e),n(e),i(e),s(e),o(e)}))};c.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(Ue,{})}),document.getElementById("root")),We()}},[[499,1,2]]]);
//# sourceMappingURL=main.84a20bfa.chunk.js.map