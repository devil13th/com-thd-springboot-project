(this["webpackJsonpprocess-management-client"]=this["webpackJsonpprocess-management-client"]||[]).push([[0],{188:function(e,t,s){},189:function(e,t,s){},190:function(e,t,s){},287:function(e,t,s){"use strict";s.r(t);var a=s(5),n=s(0),i=s.n(n),r=s(26),o=s.n(r),c=(s(188),s(189),s.p,s(73)),l=(s(190),s(35)),d=s(36),u=s(38),p=s(37),h=s(25),j=s(292),b=s(82),x=s(309),f=s(310),O=s(307),g=s(306),y=s(311),I=s(51),k=s(28),m=s(55),S=s(296),v=s(295),T=s(294),V=s(176),C=s(56),D=s(289),w=s(290),M=s(293),L=s(297),P=s(141),z=s.n(P);z.a.interceptors.response.use((function(e){return console.log("--res success--",e),e}),(function(e){return console.log("--req error--",e),V.b.error("Error:"+e),Promise.reject(e)}));var q=z.a,N="",K=function(e){return q({method:"post",url:"".concat(N,"/startProcessByDefId"),data:e})},H=function(e){return q({method:"delete",url:"".concat(N,"/deleteDeploy/").concat(e)})},A=function(e,t){return q({method:"post",url:"".concat(N,"/nextStep"),data:{taskId:e,taskAssignee:"ADMIN",processVariable:t}})},B=function(e){return q({method:"get",url:"".concat(N,"/queryProcessDef"),params:e})},J=function(e){return q({method:"get",url:"".concat(N,"/queryProcessInstancePage"),params:e})},E=function(e){return q({method:"get",url:"".concat(N,"/cancelProcessInstance"),params:{processInstanceId:e}})},Q=function(e){return q({method:"get",url:"".concat(N,"/queryTaskPage"),params:e})},F=function(e){return q({method:"get",url:"".concat(N,"/queryTaskHisPage"),params:e})},_=function(e){return q({method:"get",url:"".concat(N,"/queryProcessVarByExecutionId"),params:{executionId:e}})},W=function(e){return q({method:"get",url:"".concat(N,"/queryProcessVarLocalByExecutionId"),params:{executionId:e}})},R=function(e){return q({method:"get",url:"".concat(N,"/queryProcessVarByTaskId"),params:{taskId:e}})},G=function(e){return q({method:"get",url:"".concat(N,"/queryProcessVarLocalByTaskId"),params:{taskId:e}})},Y=function(e){return q({method:"post",url:"".concat(N,"/setProcessVarGlobalByExecutionId"),data:e})},U=function(e){return q({method:"post",url:"".concat(N,"/setProcessVarLocalByExecutionId"),data:e})},X=function(e){return q({method:"post",url:"".concat(N,"/setProcessVarGlobalByTaskId"),data:e})},Z=function(e){return q({method:"post",url:"".concat(N,"/setProcessVarLocalByTaskId"),data:e})},$=function(e){return q({method:"get",url:"".concat(N,"/queryTaskByTaskId/").concat(e)})},ee=function(e){return q({method:"get",url:"".concat(N,"/queryTaskHisByTaskHisId/").concat(e)})},te=function(e,t){return q({method:"get",url:"".concat(N,"/setAssigneeOfTask?taskId=").concat(e,"&userId=").concat(t)})},se=function(){return q({method:"get",url:"".concat(N,"/queryAllProcDefKeyList")})},ae=function(e){if(e){var t=function(e){return e<10?"0"+e:e},s=new Date(e),a=s.getFullYear(),n=s.getMonth()+1,i=s.getDate(),r=s.getHours(),o=s.getMinutes(),c=s.getSeconds();return a+"-"+t(n)+"-"+t(i)+" "+t(r)+":"+t(o)+":"+t(c)}return""},ne=s(92),ie=s(301),re=s(177),oe=s(302),ce=S.a.Search,le=S.a.TextArea,de=v.a.TabPane,ue=T.a.Dragger,pe=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={tableData:[],tableLoading:!1,keyWords:"",procDefId:"",startProcessModalVisible:!1,businessKey:"",processVariable:"",queryCondition:{businessKey:"",assignee:"",processInstanceId:""},pagination:{current:1,pageSize:10,pageSizeOptions:[5,10,15,50,100],showTotal:function(e,t){return"".concat(e," items")},showSizeChanger:!0,showQuickJumper:!0},sorter:{field:"def.id_",order:"descend"}},e.onSearch=function(t){e.setState({keyWords:t},(function(){e.queryList(!0)}))},e.queryList=function(t){console.log("===",e.state.pagination),t?e.setState({pagination:Object(k.a)(Object(k.a)({showTotal:function(e,t){return"".concat(e," items")},showSizeChanger:!0,showQuickJumper:!0},e.state.pagination),{},{current:1})},e.basicQuery):e.basicQuery()},e.basicQuery=function(){Object(m.a)(e);var t=Object(k.a)({current:e.state.pagination.current,pageSize:e.state.pagination.pageSize,total:e.state.pagination.total,sortField:e.state.sorter.field,sortOrder:e.state.sorter.order.replace("end",""),keyWords:e.state.keyWords},e.state.queryCondition);e.setState({tableLoading:!0}),B(t).then((function(t){var s=t.data;console.log(s),e.setState({tableData:s.list,tableLoading:!1,pagination:{showTotal:function(e,t){return"".concat(e," items")},showSizeChanger:!0,showQuickJumper:!0,current:s.pageNum,pageSize:s.pageSize,total:s.total}})}))},e.handleTableChange=function(t,s,a){var n={pagination:{showTotal:function(e,t){return"".concat(e," items")},showSizeChanger:!0,showQuickJumper:!0,current:t.current,pageSize:t.pageSize,total:e.state.pagination.total}};a.field&&a.order?n.sorter={field:a.field,order:a.order}:n.sorter={field:"",order:""},e.setState(n,e.queryList)},e.openStartProcessModal=function(t){e.setState({procDefId:t.procDefId,startProcessModalVisible:!0})},e.closeProcessModal=function(){e.setState({processDefinitionId:"",startProcessModalVisible:!1})},e.startProcess=function(){var t={};try{t=JSON.parse(e.state.processVariable)}catch(s){return void V.b.error("Json Parse Error !")}K({businessKey:e.state.businessKey,processVariable:t,procDefId:e.state.procDefId}).then((function(t){V.b.success("Process Be Started Success"),e.closeProcessModal()}))},e.vmodel=function(t,s){e.setState(Object(I.a)({},t,s))},e.deleteDeploy=function(t){H(t.deploymentId).then((function(t){"SUCCESS"===t.data?(V.b.success("Process Defined Be Deleted successfully"),e.queryList(!1)):V.b.error("Process Defined Deleted Failure")}))},e}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.setState({queryCondition:{}},this.queryList)}},{key:"render",value:function(){var e=this;console.log("render...");var t=[{title:"Def ID",dataIndex:"procDefId"},{title:"Def Name",dataIndex:"defName"},{title:"Def Key",dataIndex:"defKey"},{title:"Def Ver.",dataIndex:"defVersion"},{title:"Deployment Id",dataIndex:"deploymentId"},{title:"Deployment Time",dataIndex:"deployTime",render:function(e,t,s){return ae(e)}},{title:"Operate",key:"operate",render:function(t,s){return Object(a.jsxs)("div",{children:[Object(a.jsx)(C.a,{title:"Detail",placement:"left",children:Object(a.jsx)("a",{children:Object(a.jsx)(ne.a,{})})}),Object(a.jsx)(D.a,{type:"vertical"}),Object(a.jsx)(C.a,{title:"Start Process",placement:"left",children:Object(a.jsx)("a",{children:Object(a.jsx)(ie.a,{onClick:function(){e.openStartProcessModal(s)}})})}),Object(a.jsx)(D.a,{type:"vertical"}),Object(a.jsx)(w.a,{placement:"left",title:"Are you sure to delete this process defined?",onConfirm:function(){e.deleteDeploy(s)},okText:"Yes",cancelText:"No",children:Object(a.jsx)(C.a,{title:"Delete Process Defined",placement:"left",children:Object(a.jsx)("a",{children:Object(a.jsx)(re.a,{})})})})]})}}],s={right:Object(a.jsx)(ce,{placeholder:"key words",onSearch:this.onSearch,style:{width:200},size:"small",enterButton:!0})},n={name:"file",multiple:!0,action:"/deploy",onChange:function(t){var s=t.file.status;"uploading"!==s&&console.log(t.file,t.fileList),"done"===s?(V.b.success("".concat(t.file.name," file uploaded successfully.")),e.queryList(!1)):"error"===s&&V.b.error("".concat(t.file.name," file upload failed."))}};return Object(a.jsxs)("div",{children:[Object(a.jsx)(v.a,{type:"card",tabBarExtraContent:s,children:Object(a.jsx)(de,{tab:"Process Defined"},"1")}),Object(a.jsx)(M.a,{onChange:this.handleTableChange,columns:t,dataSource:this.state.tableData,pagination:this.state.pagination,size:"small",rowKey:function(e){return e.procDefId}}),Object(a.jsxs)(ue,Object(k.a)(Object(k.a)({},n),{},{children:[Object(a.jsx)("p",{className:"ant-upload-drag-icon",children:Object(a.jsx)(oe.a,{})}),Object(a.jsx)("p",{className:"ant-upload-text",children:"Click or drag bpmn to this area to deploy a new process"}),Object(a.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files"})]})),Object(a.jsxs)(L.a,{title:"Start Process",visible:this.state.startProcessModalVisible,onOk:this.startProcess,onCancel:this.closeProcessModal,width:"80%",children:[Object(a.jsx)("div",{style:{marginTop:"8px"},children:Object(a.jsx)(S.a,{placeholder:"Business Key",onChange:function(t){e.vmodel("businessKey",t.target.value)}})}),Object(a.jsxs)("div",{style:{marginTop:"8px"},children:[Object(a.jsx)(le,{rows:4,onChange:function(t){e.vmodel("processVariable",t.target.value)},placeholder:"Process Variable (JSON) "}),Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:'Eg.<br/>{<br/>"users":["zhangsan","lisi","wangwu"],<br/>"judge":"\u201dzhaoliu"<br/>}'}})]})]})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return console.log("---xxxx---",e,t),e.processInstanceId!==t.queryCondition.processInstanceId?{processInstanceId:e.processInstanceId}:null}}]),s}(i.a.Component),he=s(104),je=s(27),be=s(291),xe=s(305),fe=s(308),Oe=s(299),ge=s(300),ye=s(298),Ie=s(303),ke=S.a.TextArea,me=he.a.Option,Se=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={executionVar:"",executionLocalVar:"",taskVar:"",taskLocalVar:"",tid:"",idType:"",processVarStr:"{}"},e.search=function(){"execution"===e.state.idType?(_(e.state.tid).then((function(t){console.log(t),e.setState({executionVar:JSON.stringify(t.data)})})),W(e.state.tid).then((function(t){console.log(t),e.setState({executionLocalVar:JSON.stringify(t.data)})}))):(R(e.state.tid).then((function(t){console.log(t),e.setState({taskVar:JSON.stringify(t.data)})})),G(e.state.tid).then((function(t){console.log(t),e.setState({taskLocalVar:JSON.stringify(t.data)})})))},e.vmodel=function(t,s){e.setState(Object(I.a)({},t,s))},e.setVarGlobal=function(){var t={};try{t=JSON.parse(e.state.processVarStr)}catch(s){return void V.b.error(" JSON parse err!")}"execution"===e.state.idType?Y({executionId:e.state.tid,processVariable:t}).then((function(t){e.search()})):X({executionId:e.state.tid,processVariable:t}).then((function(t){e.search()}))},e.setVarLocal=function(){var t={};try{t=JSON.parse(e.state.processVarStr)}catch(s){return void V.b.error(" JSON parse err!")}"execution"===e.state.idType?U({executionId:e.state.tid,processVariable:t}).then((function(t){e.search()})):Z({executionId:e.state.tid,processVariable:t}).then((function(t){e.search()}))},e}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.props.id&&this.setState({tid:this.props.id,idType:this.props.processVarType},this.search)}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{style:{textAlign:"right"},children:Object(a.jsxs)(S.a.Group,{compact:!0,children:[Object(a.jsxs)(he.a,{style:{width:130},defaultValue:"execution",value:this.state.idType,onChange:function(t){e.setState({idType:t})},children:[Object(a.jsx)(me,{value:"execution",children:"Execution ID"}),Object(a.jsx)(me,{value:"task",children:"Task ID"})]}),Object(a.jsx)(S.a.Search,{enterButton:!0,style:{width:200},onChange:function(t){e.setState({tid:t.target.value})},value:this.state.tid,onSearch:this.search})]})}),Object(a.jsx)(D.a,{}),Object(a.jsxs)(Oe.a,{children:[Object(a.jsxs)(ge.a,{span:4,style:{textAlign:"right",paddingRight:8,paddingTop:6},children:[Object(a.jsx)(Ie.a,{})," Set Process Variable:"]}),Object(a.jsxs)(ge.a,{span:10,children:[Object(a.jsx)(ke,{value:this.state.processVarStr,onChange:function(t){e.vmodel("processVarStr",t.target.value)}}),Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:'Eg.<br/>{<br/>"users":["zhangsan","lisi","wangwu"],<br/>"judge":"\u201dzhaoliu"<br/>}'}})]}),Object(a.jsxs)(ge.a,{span:9,offset:1,children:[Object(a.jsx)(je.a,{onClick:this.setVarGlobal,children:" Set Variable Global"}),Object(a.jsx)(D.a,{type:"vertical"}),Object(a.jsx)(je.a,{onClick:this.setVarLocal,children:" Set Variable Local"})]})]}),Object(a.jsx)(D.a,{}),Object(a.jsxs)(Oe.a,{children:[Object(a.jsx)(ge.a,{span:10,style:{textAlign:"right",paddingRight:8,paddingTop:6},children:"Execution Gloab Variable :"}),Object(a.jsx)(ge.a,{span:14,children:Object(a.jsx)(ye.a,{message:this.state.executionVar?this.state.executionVar:"{}",type:"warning"})})]}),Object(a.jsx)(D.a,{}),Object(a.jsxs)(Oe.a,{children:[Object(a.jsx)(ge.a,{span:10,style:{textAlign:"right",paddingRight:8,paddingTop:6},children:"Execution Local Variable :"}),Object(a.jsx)(ge.a,{span:14,children:Object(a.jsx)(ye.a,{message:this.state.executionLocalVar?this.state.executionLocalVar:"{}",type:"warning"})})]}),Object(a.jsx)(D.a,{}),Object(a.jsxs)(Oe.a,{children:[Object(a.jsx)(ge.a,{span:10,style:{textAlign:"right",paddingRight:8,paddingTop:6},children:"Task Gloab Variable :"}),Object(a.jsx)(ge.a,{span:14,children:Object(a.jsx)(ye.a,{message:this.state.taskVar?this.state.taskVar:"{}",type:"info"})})]}),Object(a.jsx)(D.a,{}),Object(a.jsxs)(Oe.a,{children:[Object(a.jsx)(ge.a,{span:10,style:{textAlign:"right",paddingRight:8,paddingTop:6},children:"Task Local Variable :"}),Object(a.jsx)(ge.a,{span:14,children:Object(a.jsx)(ye.a,{message:this.state.taskLocalVar?this.state.taskLocalVar:"{}",type:"info"})})]})]})}}]),s}(i.a.Component),ve=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={taskType:"",taskInfo:{}},e.queryTaskByTaskId=function(){$(e.props.taskId).then((function(t){e.setState({taskInfo:t.data})}))},e.queryTaskHisByTaskHisId=function(){ee(e.props.taskHisId).then((function(t){e.setState({taskInfo:t.data})}))},e}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.props.taskId&&this.setState({taskId:this.props.taskId},this.queryTaskByTaskId),this.props.taskHisId&&this.setState({taskHisId:this.props.taskHisId},this.queryTaskHisByTaskHisId)}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsxs)(Oe.a,{gutter:24,children:[Object(a.jsxs)(ge.a,{span:"8",children:["Task Id\uff1a",this.state.taskInfo.taskId]}),Object(a.jsxs)(ge.a,{span:"8",children:["Task Defined Name\uff1a",this.state.taskInfo.taskDefKey]}),Object(a.jsxs)(ge.a,{span:"8",children:["Task Name\uff1a",this.state.taskInfo.taskId]})]}),Object(a.jsxs)(Oe.a,{gutter:24,children:[Object(a.jsxs)(ge.a,{span:"8",children:["TaskAssignee\uff1a",this.state.taskInfo.taskAssignee]}),Object(a.jsxs)(ge.a,{span:"8",children:["TaskOwner\uff1a",this.state.taskInfo.taskOwner]}),Object(a.jsxs)(ge.a,{span:"8",children:["TaskFormKey\uff1a",this.state.taskInfo.taskFormKey]})]}),Object(a.jsxs)(Oe.a,{gutter:24,children:[Object(a.jsxs)(ge.a,{span:"8",children:["TaskStartTime\uff1a",ae(this.state.taskInfo.taskStartTime)]}),Object(a.jsxs)(ge.a,{span:"8",children:["TaskEndTime\uff1a",ae(this.state.taskInfo.taskEndTime)]}),Object(a.jsx)(ge.a,{span:"8"})]}),Object(a.jsx)(D.a,{}),Object(a.jsxs)(Oe.a,{gutter:24,children:[Object(a.jsxs)(ge.a,{span:"8",children:["BusinessKey\uff1a",this.state.taskInfo.businessKey]}),Object(a.jsxs)(ge.a,{span:"8",children:["ProcessInstanceId\uff1a",this.state.taskInfo.processInstanceId]}),Object(a.jsxs)(ge.a,{span:"8",children:["ExecutionId\uff1a",this.state.taskInfo.executionId]})]}),Object(a.jsx)(Oe.a,{gutter:24,children:Object(a.jsxs)(ge.a,{span:"8",children:["DeploymentId\uff1a",this.state.taskInfo.deploymentId]})}),Object(a.jsxs)(Oe.a,{gutter:24,children:[Object(a.jsxs)(ge.a,{span:"8",children:["ProcDefId\uff1a",this.state.taskInfo.procDefId]}),Object(a.jsxs)(ge.a,{span:"8",children:["DefKey\uff1a",this.state.taskInfo.defKey]}),Object(a.jsxs)(ge.a,{span:"8",children:["DefName\uff1a",this.state.taskInfo.defName]})]}),Object(a.jsxs)(Oe.a,{gutter:24,children:[Object(a.jsxs)(ge.a,{span:"8",children:["ProcessInstanceStartTime\uff1a",ae(this.state.taskInfo.processInstanceStartTime)]}),Object(a.jsxs)(ge.a,{span:"8",children:["ProcessInstanceEndTime\uff1a",ae(this.state.taskInfo.processInstanceEndTime)]})]}),Object(a.jsx)(D.a,{}),Object(a.jsx)(Oe.a,{gutter:24,children:Object(a.jsxs)(ge.a,{span:"24",children:["Task Variable\uff1a",JSON.stringify(this.state.taskInfo.taskVar)]})}),Object(a.jsx)(Oe.a,{gutter:24,children:Object(a.jsxs)(ge.a,{span:"24",children:["Execution Variable\uff1a",JSON.stringify(this.state.taskInfo.executionVar)]})}),Object(a.jsx)(Oe.a,{gutter:24,children:Object(a.jsxs)(ge.a,{span:"24",children:["Process Variable\uff1a",JSON.stringify(this.state.taskInfo.processInstanceVar)]})})]})}}]),s}(i.a.Component),Te=s(304),Ve=S.a.TextArea,Ce=S.a.Search,De=v.a.TabPane,we=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={tableData:[],tableLoading:!1,keyWords:"",processInstanceId:"",taskId:"",taskHisId:"",tid:"",processVarType:"",nextStepModalVisible:!1,processVarModalVisible:!1,taskDetailModalVisible:!1,reassignModalVisible:!1,processVariable:{},queryCondition:{businessKey:"",assignee:"",processInstanceId:""},pagination:{current:1,pageSize:10,pageSizeOptions:[5,10,15,50,100],showTotal:function(e,t){return"".concat(e," items")},showSizeChanger:!0,showQuickJumper:!0},sorter:{field:"task.create_time_ ",order:"descend"}},e.onSearch=function(t){e.setState({keyWords:t},(function(){e.queryList(!0)}))},e.queryList=function(t){console.log("===",e.state.pagination),t?e.setState({pagination:Object(k.a)(Object(k.a)({showTotal:function(e,t){return"".concat(e," items")},showSizeChanger:!0,showQuickJumper:!0},e.state.pagination),{},{current:1})},e.basicQuery):e.basicQuery()},e.basicQuery=function(){Object(m.a)(e);var t=Object(k.a)({current:e.state.pagination.current,pageSize:e.state.pagination.pageSize,total:e.state.pagination.total,sortField:e.state.sorter.field,sortOrder:e.state.sorter.order.replace("end",""),keyWords:e.state.keyWords},e.state.queryCondition);e.setState({tableLoading:!0}),Q(t).then((function(t){var s=t.data;e.setState({tableData:s.list,tableLoading:!1,pagination:{showTotal:function(e,t){return"".concat(e," items")},showSizeChanger:!0,showQuickJumper:!0,current:s.pageNum,pageSize:s.pageSize,total:s.total}})}))},e.handleTableChange=function(t,s,a){var n={pagination:{showTotal:function(e,t){return"".concat(e," items")},showSizeChanger:!0,showQuickJumper:!0,current:t.current,pageSize:t.pageSize,total:e.state.pagination.total}};a.field&&a.order?n.sorter={field:a.field,order:a.order}:n.sorter={field:"",order:""},e.setState(n,e.queryList)},e.openNextStepModal=function(t){e.setState({taskId:t.taskId,nextStepModalVisible:!0})},e.closeNextStepModal=function(){e.setState({taskId:"",nextStepModalVisible:!1})},e.openTaskDetailModal=function(t){e.setState({taskId:t.taskId,taskDetailModalVisible:!0})},e.closeTaskDetailModal=function(){e.setState({taskId:"",taskDetailModalVisible:!1})},e.nextStep=function(){var t={};try{t=JSON.parse(e.state.processVariable)}catch(s){return void V.b.error("Json Parse Error !")}A(e.state.taskId,t).then((function(t){V.b.success("Task Be Completed Success"),e.queryList(!1),e.closeNextStepModal()}))},e.vmodel=function(t,s){e.setState(Object(I.a)({},t,s))},e.openTaskVar=function(t){e.setState({processVarModalVisible:!0,tid:t,processVarType:"task"})},e.openExecutionVar=function(t){e.setState({processVarModalVisible:!0,tid:t,processVarType:"execution"})},e.closeProcessVarModal=function(){e.setState({processVarModalVisible:!1,tid:"",processVarType:""})},e.openReassignModal=function(t){e.setState({taskId:t.taskId,reassignModalVisible:!0,userId:t.taskAssignee})},e.closeReassignModal=function(t){e.setState({taskId:"",reassignModalVisible:!1})},e.reAssigneeOfTask=function(){te(e.state.taskId,e.state.userId).then((function(t){console.log(t),e.queryList(!1),e.closeReassignModal()}))},e}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var e={};this.props.businessKey&&(e.businessKey=this.props.businessKey),this.props.assignee&&(e.assignee=this.props.assignee),this.props.processInstanceId&&(e.processInstanceId=this.props.processInstanceId),this.setState({queryCondition:e},this.queryList)}},{key:"render",value:function(){var e=this;console.log("render...");var t=[{title:"Def ID",dataIndex:"procDefId"},{title:"Key",dataIndex:"businessKey"},{title:"PI Id",dataIndex:"processInstanceId"},{title:"Exec Id",dataIndex:"executionId"},{title:"Task Id",dataIndex:"taskId"},{title:"Task Name",dataIndex:"taskName"},{title:"Assignee",dataIndex:"taskAssignee"},{title:"Start",dataIndex:"taskStartTime",render:function(e,t,s){return ae(e)}},{title:"Form",dataIndex:"taskFormKey"},{title:"Operate",key:"operate",render:function(t,s){return Object(a.jsxs)("div",{children:[Object(a.jsx)(C.a,{title:"Detail",children:Object(a.jsx)("a",{children:Object(a.jsx)(ne.a,{onClick:function(){e.openTaskDetailModal(s)}})})}),Object(a.jsx)(D.a,{type:"vertical"}),Object(a.jsx)(C.a,{title:"Replace Assignee",children:Object(a.jsx)("a",{children:Object(a.jsx)(Te.a,{onClick:function(){e.openReassignModal(s)}})})}),Object(a.jsx)(D.a,{type:"vertical"}),Object(a.jsx)(C.a,{title:"Set Task Variable",children:Object(a.jsx)("a",{children:Object(a.jsx)(xe.a,{onClick:function(){e.openTaskVar(s.taskId)}})})}),Object(a.jsx)(D.a,{type:"vertical"}),Object(a.jsx)(C.a,{title:"Set Execution Variable",children:Object(a.jsx)("a",{children:Object(a.jsx)(xe.a,{onClick:function(){e.openExecutionVar(s.executionId)}})})}),Object(a.jsx)(D.a,{type:"vertical"}),Object(a.jsx)(C.a,{title:"Next Step",children:Object(a.jsx)("a",{children:Object(a.jsx)(ie.a,{onClick:function(){e.openNextStepModal(s)}})})})]})}}],s={right:Object(a.jsx)(Ce,{placeholder:"key words",onSearch:this.onSearch,style:{width:200},size:"small",enterButton:!0})};return Object(a.jsxs)("div",{children:[Object(a.jsx)(v.a,{type:"card",tabBarExtraContent:s,children:Object(a.jsx)(De,{tab:"Current Task"},"1")}),Object(a.jsx)(M.a,{onChange:this.handleTableChange,columns:t,dataSource:this.state.tableData,pagination:this.state.pagination,size:"small",rowKey:function(e){return e.processInstanceId+"_"+e.taskId+"_"+e.taskAssignee}}),Object(a.jsx)(L.a,{title:"Next Step",style:{top:32},visible:this.state.nextStepModalVisible,onOk:this.nextStep,onCancel:this.closeNextStepModal,width:"80%",children:Object(a.jsxs)("div",{style:{marginTop:"8px"},children:[Object(a.jsx)(Ve,{rows:4,onChange:function(t){e.vmodel("processVariable",t.target.value)},placeholder:"Process Variable (JSON) "}),Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:'Eg.<br/>{<br/>"users":["zhangsan","lisi","wangwu"],<br/>"judge":"\u201dzhaoliu"<br/>}'}})]})}),Object(a.jsx)(L.a,{width:"100%",style:{top:32},title:Object(a.jsx)(g.a,{}),visible:this.state.processVarModalVisible,onOk:this.closeProcessVarModal,onCancel:this.closeProcessVarModal,destroyOnClose:!0,maskClosable:!1,children:Object(a.jsx)(Se,{processVarType:this.state.processVarType,id:this.state.tid})}),Object(a.jsx)(L.a,{width:"100%",style:{top:32},title:Object(a.jsx)(g.a,{}),visible:this.state.taskDetailModalVisible,onOk:this.closeTaskDetailModal,onCancel:this.closeTaskDetailModal,destroyOnClose:!0,maskClosable:!1,children:Object(a.jsx)(ve,{taskId:this.state.taskId})}),Object(a.jsx)(L.a,{width:"100%",style:{top:32},title:Object(a.jsx)(g.a,{}),visible:this.state.reassignModalVisible,onOk:this.reAssigneeOfTask,onCancel:this.closeReassignModal,destroyOnClose:!0,maskClosable:!1,children:Object(a.jsx)(S.a,{value:this.state.userId,onChange:function(t){e.vmodel("userId",t.target.value)}})})]})}}]),s}(i.a.Component);we.defaultProps={businessKey:"",assignee:"",processInstanceId:""};var Me=we,Le=S.a.Search,Pe=v.a.TabPane,ze=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={tableData:[],tableLoading:!1,keyWords:"",processInstanceId:"",taskDetailModalVisible:!1,taskHisId:"",queryCondition:{businessKey:"",assignee:"",processInstanceId:""},pagination:{current:1,pageSize:10,pageSizeOptions:[5,10,15,50,100],showTotal:function(e,t){return"".concat(e," items")},showSizeChanger:!0,showQuickJumper:!0},sorter:{field:"taskhis.start_time_ ",order:"descend"}},e.onSearch=function(t){e.setState({keyWords:t},(function(){e.queryList(!0)}))},e.queryList=function(t){console.log("===",e.state.pagination),t?e.setState({pagination:Object(k.a)(Object(k.a)({showTotal:function(e,t){return"".concat(e," items")},showSizeChanger:!0,showQuickJumper:!0},e.state.pagination),{},{current:1})},e.basicQuery):e.basicQuery()},e.basicQuery=function(){Object(m.a)(e);var t=Object(k.a)({current:e.state.pagination.current,pageSize:e.state.pagination.pageSize,total:e.state.pagination.total,sortField:e.state.sorter.field,sortOrder:e.state.sorter.order.replace("end",""),keyWords:e.state.keyWords},e.state.queryCondition);e.setState({tableLoading:!0}),F(t).then((function(t){var s=t.data;console.log(s),e.setState({tableData:s.list,tableLoading:!1,pagination:{showTotal:function(e,t){return"".concat(e," items")},showSizeChanger:!0,showQuickJumper:!0,current:s.pageNum,pageSize:s.pageSize,total:s.total}})}))},e.handleTableChange=function(t,s,a){var n={pagination:{showTotal:function(e,t){return"".concat(e," items")},showSizeChanger:!0,showQuickJumper:!0,current:t.current,pageSize:t.pageSize,total:e.state.pagination.total}};a.field&&a.order?n.sorter={field:a.field,order:a.order}:n.sorter={field:"",order:""},e.setState(n,e.queryList)},e.openTaskDetailModal=function(t){e.setState({taskHisId:t.taskHisId,taskDetailModalVisible:!0})},e.closeTaskDetailModal=function(){e.setState({taskHisId:"",taskDetailModalVisible:!1})},e}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var e={};this.props.businessKey&&(e.businessKey=this.props.businessKey),this.props.assignee&&(e.assignee=this.props.assignee),this.props.processInstanceId&&(e.processInstanceId=this.props.processInstanceId),this.setState({queryCondition:e},this.queryList)}},{key:"render",value:function(){var e=this;console.log("render...");var t=[{title:"Def ID",dataIndex:"procDefId"},{title:"Key",dataIndex:"businessKey"},{title:"PI Id",dataIndex:"processInstanceId"},{title:"Task His Id",dataIndex:"taskHisId"},{title:"Task Name",dataIndex:"taskName"},{title:"Assignee",dataIndex:"taskAssignee"},{title:"Start",dataIndex:"taskHisStartTime",render:function(e,t,s){return ae(e)}},{title:"End",dataIndex:"taskHisEndTime",render:function(e,t,s){return ae(e)}},{title:"Form",dataIndex:"taskFormKey"},{title:"Operate",key:"operate",render:function(t,s){return Object(a.jsx)("div",{children:Object(a.jsx)(C.a,{title:"Detail",children:Object(a.jsx)("a",{children:Object(a.jsx)(ne.a,{onClick:function(){return e.openTaskDetailModal(s)}})})})})}}],s={right:Object(a.jsx)(Le,{placeholder:"key words",onSearch:this.onSearch,style:{width:200},size:"small",enterButton:!0})};return Object(a.jsxs)("div",{children:[Object(a.jsx)(v.a,{type:"card",tabBarExtraContent:s,children:Object(a.jsx)(Pe,{tab:"Task His"},"1")}),Object(a.jsx)(M.a,{onChange:this.handleTableChange,columns:t,dataSource:this.state.tableData,pagination:this.state.pagination,size:"small",rowKey:function(e){return e.processInstanceId+"_"+e.taskHisId+"_"+e.taskAssignee}}),Object(a.jsx)(L.a,{width:"100%",style:{top:32},title:Object(a.jsx)(g.a,{}),visible:this.state.taskDetailModalVisible,onOk:this.closeTaskDetailModal,onCancel:this.closeTaskDetailModal,destroyOnClose:!0,maskClosable:!1,children:Object(a.jsx)(ve,{taskHisId:this.state.taskHisId})})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return console.log("---xxxx---",e,t),e.processInstanceId!==t.queryCondition.processInstanceId?{processInstanceId:e.processInstanceId}:null}}]),s}(i.a.Component);ze.defaultProps={businessKey:"",assignee:"",processInstanceId:""};var qe=ze,Ne=S.a.Search,Ke=v.a.TabPane,He=he.a.Option,Ae=function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={tableData:[],tableLoading:!1,processDefList:[],keyWords:"",queryObj:{a:1},processInstanceId:"",taskListModalVisible:!1,taskHisListModalVisible:!1,processVarModalVisible:!1,executionVar:"",executionLocalVar:"",pagination:{current:1,pageSize:10,pageSizeOptions:[5,10,15,50,100],showTotal:function(e,t){return"".concat(e," items")},showSizeChanger:!0,showQuickJumper:!0},sorter:{field:"procinst.start_time_",order:"descend"}},e.onSearch=function(t){e.setState({keyWords:t},(function(){e.queryList(!0)}))},e.queryList=function(t){console.log("===",e.state.pagination),t?e.setState({pagination:Object(k.a)(Object(k.a)({showTotal:function(e,t){return"".concat(e," items")},showSizeChanger:!0,showQuickJumper:!0},e.state.pagination),{},{current:1})},e.basicQuery):e.basicQuery()},e.basicQuery=function(){Object(m.a)(e);var t=Object(k.a)({current:e.state.pagination.current,pageSize:e.state.pagination.pageSize,total:e.state.pagination.total,sortField:e.state.sorter.field,sortOrder:e.state.sorter.order.replace("end",""),keyWords:e.state.keyWords},e.state.queryObj);e.setState({tableLoading:!0}),J(t).then((function(t){var s=t.data;e.setState({tableData:s.list,tableLoading:!1,pagination:{showTotal:function(e,t){return"".concat(e," items")},showSizeChanger:!0,showQuickJumper:!0,current:s.pageNum,pageSize:s.pageSize,total:s.total}})}))},e.handleTableChange=function(t,s,a){var n={pagination:{showTotal:function(e,t){return"".concat(e," items")},showSizeChanger:!0,showQuickJumper:!0,current:t.current,pageSize:t.pageSize,total:e.state.pagination.total}};a.field&&a.order?n.sorter={field:a.field,order:a.order}:n.sorter={field:"",order:""},e.setState(n,e.queryList)},e.openTaskListModal=function(t){e.setState({processInstanceId:t,taskListModalVisible:!0})},e.openTaskHisListModal=function(t){e.setState({processInstanceId:t,taskHisListModalVisible:!0})},e.closeModal=function(){e.setState({taskListModalVisible:!1,taskHisListModalVisible:!1,processVarModalVisible:!1})},e.deleteProcessInstance=function(t){E(t.processInstanceId).then((function(t){"SUCCESS"===t.data?(V.b.success("Process Instance Be Deleted successfully"),e.queryList(!1)):V.b.error("Process Instance Deleted Failure")}))},e.pageInit=function(){se().then((function(t){e.setState({processDefList:t.data})}))},e.setQueryObj=function(t,s){console.log(t,s),e.setState({queryObj:Object(k.a)(Object(k.a)({},e.state.queryObj),{},Object(I.a)({},t,s))})},e}return Object(d.a)(s,[{key:"openProcessVar",value:function(e){this.setState({processVarModalVisible:!0,processInstanceId:e})}},{key:"componentDidMount",value:function(){this.queryList()}},{key:"componentDidMount",value:function(){this.pageInit()}},{key:"render",value:function(){var e=this,t=[{title:"Def ID",dataIndex:"procDefId"},{title:"Key",dataIndex:"businessKey"},{title:"PI Id",dataIndex:"processInstanceId"},{title:"Start",dataIndex:"processInstanceStartTime",render:function(e,t,s){return ae(e)}},{title:"End",dataIndex:"processInstanceEndTime",render:function(e,t,s){return ae(e)}},{title:"Operate",key:"operate",render:function(t,s){return Object(a.jsxs)("div",{children:[Object(a.jsx)(C.a,{title:"Curent Task",children:Object(a.jsx)("a",{children:Object(a.jsx)(O.a,{onClick:function(){e.openTaskListModal(s.processInstanceId)}})})}),Object(a.jsx)(D.a,{type:"vertical"}),Object(a.jsx)(C.a,{title:"Step History",children:Object(a.jsx)("a",{children:Object(a.jsx)(g.a,{onClick:function(){e.openTaskHisListModal(s.processInstanceId)}})})}),Object(a.jsx)(D.a,{type:"vertical"}),Object(a.jsx)(w.a,{placement:"left",title:"Are you sure to delete this process instance?",onConfirm:function(){e.deleteProcessInstance(s)},okText:"Yes",cancelText:"No",children:Object(a.jsx)(C.a,{title:"Delete Process Instance",children:Object(a.jsx)("a",{children:Object(a.jsx)(re.a,{})})})}),Object(a.jsx)(D.a,{type:"vertical"}),Object(a.jsx)(C.a,{title:"Set Process Global Variable",children:Object(a.jsx)("a",{children:Object(a.jsx)(xe.a,{onClick:function(){e.openProcessVar(s.processInstanceId)}})})})]})}}],s=Object(a.jsxs)("div",{children:[Object(a.jsx)(S.a,{size:"small",addonBefore:"[Def Name] like",onChange:function(t){e.setQueryObj("defName",t.target.value)},style:{width:250,marginBottom:8}}),Object(a.jsx)("br",{}),Object(a.jsx)(S.a,Object(I.a)({size:"small",addonBefore:"[Def Id] =",onChange:function(t){e.setQueryObj("procDefId",t.target.value)},style:{width:250}},"style",{width:250,marginBottom:8})),Object(a.jsx)("br",{}),Object(a.jsx)(je.a,{type:"primary",onClick:function(){e.queryList(!0)},block:!0,size:"small",children:"Search"})]}),n={right:Object(a.jsxs)("div",{children:[Object(a.jsx)(he.a,{placeholder:"Def Key",size:"small",style:{width:150},showSearch:!0,optionFilterProp:"children",allowClear:!0,onChange:function(t){e.setQueryObj("defKey",t)},children:this.state.processDefList.map((function(e){return Object(a.jsx)(He,{value:e.defKey,children:e.defKey})}))}),Object(a.jsx)(Ne,{placeholder:"key words",onSearch:this.onSearch,style:{width:200,marginRight:8},size:"small",enterButton:!0}),Object(a.jsx)(C.a,{placement:"bottomLeft",title:"=[processInstanceId] or like [businessKey]",children:Object(a.jsx)(ne.a,{style:{color:"#1890ff",marginRight:16}})}),Object(a.jsx)(be.a,{placement:"leftTop",trigger:"click",content:s,title:"Advance Search",children:Object(a.jsx)(C.a,{title:"Advance Search",children:Object(a.jsx)(fe.a,{style:{color:"#1890ff"}})})})]})};return Object(a.jsxs)("div",{children:[Object(a.jsx)(v.a,{type:"card",tabBarExtraContent:n,children:Object(a.jsx)(Ke,{tab:"Process Instance Management"})}),Object(a.jsx)(M.a,{onChange:this.handleTableChange,columns:t,dataSource:this.state.tableData,pagination:this.state.pagination,size:"small",rowKey:"processInstanceId"}),Object(a.jsx)(L.a,{width:"100%",style:{top:32},title:Object(a.jsx)(O.a,{}),visible:this.state.taskListModalVisible,onOk:this.closeModal,onCancel:this.closeModal,destroyOnClose:!0,maskClosable:!1,children:Object(a.jsx)(Me,{processInstanceId:this.state.processInstanceId})}),Object(a.jsx)(L.a,{width:"100%",style:{top:32},title:Object(a.jsx)(g.a,{}),visible:this.state.taskHisListModalVisible,onOk:this.closeModal,onCancel:this.closeModal,destroyOnClose:!0,maskClosable:!1,children:Object(a.jsx)(qe,{processInstanceId:this.state.processInstanceId})}),Object(a.jsx)(L.a,{width:"100%",title:Object(a.jsx)(g.a,{}),visible:this.state.processVarModalVisible,onOk:this.closeModal,onCancel:this.closeModal,destroyOnClose:!0,maskClosable:!1,children:Object(a.jsx)(Se,{processVarType:"execution",id:this.state.processInstanceId})})]})}}]),s}(i.a.Component),Be=(j.a.Header,j.a.Content),Je=j.a.Footer,Ee=j.a.Sider,Qe=(b.a.SubMenu,function(e){Object(u.a)(s,e);var t=Object(p.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).state={collapsed:!1},e.onCollapse=function(t){console.log(t),e.setState({collapsed:t})},e}return Object(d.a)(s,[{key:"render",value:function(){var e=this.state.collapsed;return Object(a.jsxs)(j.a,{style:{minHeight:"100vh"},children:[Object(a.jsxs)(Ee,{collapsible:!0,collapsed:e,onCollapse:this.onCollapse,children:[Object(a.jsx)("div",{className:"logo",children:"____"}),Object(a.jsxs)(b.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline",children:[Object(a.jsx)(b.a.Item,{icon:Object(a.jsx)(x.a,{}),children:Object(a.jsx)(c.b,{to:"/processDefinedList",children:"Process Mgmt. "})},"processDefinedList"),Object(a.jsx)(b.a.Item,{icon:Object(a.jsx)(f.a,{}),children:Object(a.jsx)(c.b,{to:"/processInstanceList",children:"Instance Mgmt."})},"processInstanceList"),Object(a.jsx)(b.a.Item,{icon:Object(a.jsx)(O.a,{}),children:Object(a.jsx)(c.b,{to:"/taskList",children:"Task List"})},"taskList"),Object(a.jsx)(b.a.Item,{icon:Object(a.jsx)(g.a,{}),children:Object(a.jsx)(c.b,{to:"/TaskHisList",children:"Task His List"})},"TaskHisList"),Object(a.jsx)(b.a.Item,{icon:Object(a.jsx)(y.a,{}),children:Object(a.jsx)(c.b,{to:"/ProcessVariable",children:"Process Var"})},"ProcessVariable")]})]}),Object(a.jsxs)(j.a,{className:"site-layout",children:[Object(a.jsx)(Be,{style:{margin:"16px 16px 0px"},children:Object(a.jsxs)("div",{className:"site-layout-background",style:{padding:"8px 24px",minHeight:360},children:[Object(a.jsx)(h.a,{path:"/processDefinedList",exact:!0,component:pe}),Object(a.jsx)(h.a,{path:"/processInstanceList",exact:!0,component:Ae}),Object(a.jsx)(h.a,{path:"/taskList",exact:!0,component:Me}),Object(a.jsx)(h.a,{path:"/TaskHisList",exact:!0,component:qe}),Object(a.jsx)(h.a,{path:"/ProcessVariable",exact:!0,component:Se})]})}),Object(a.jsx)(Je,{style:{textAlign:"center"},children:"Activiti Process Management System"})]})]})}}]),s}(i.a.Component));var Fe=function(){return Object(a.jsx)(c.a,{children:Object(a.jsx)(Qe,{})})},_e=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,312)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,r=t.getTTFB;s(e),a(e),n(e),i(e),r(e)}))};o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(Fe,{})}),document.getElementById("root")),_e()}},[[287,1,2]]]);
//# sourceMappingURL=main.006fd763.chunk.js.map